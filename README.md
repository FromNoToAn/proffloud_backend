# ProffLoud Backend

Backend API –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ —Å —Å–∞–π—Ç–∞ ProffLoud.

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

–ë–µ–∫–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Gmail API** –≤–º–µ—Å—Ç–æ SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ email. –≠—Ç–æ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ—Ä—Ç–æ–≤ –Ω–∞ Render –∏ –¥—Ä—É–≥–∏—Ö –æ–±–ª–∞—á–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö.

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. [GMAIL_API_SETUP.md](./GMAIL_API_SETUP.md) –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏.

### –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

1. –°–æ–∑–¥–∞–π—Ç–µ OAuth2 credentials –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –ü–æ–ª—É—á–∏—Ç–µ Refresh Token (—Å–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ GMAIL_API_SETUP.md)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `.env`:
   - `GMAIL_CLIENT_ID` - Client ID –∏–∑ Google Cloud Console
   - `GMAIL_CLIENT_SECRET` - Client Secret –∏–∑ Google Cloud Console
   - `GMAIL_REFRESH_TOKEN` - Refresh Token (–ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑)
   - `GMAIL_USER` - –≤–∞—à Gmail –∞–¥—Ä–µ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `your-email@gmail.com`)
   - `RECIPIENT_EMAIL` - email –∞–¥—Ä–µ—Å, –∫—É–¥–∞ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞—è–≤–∫–∏

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Gmail API

- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTPS (–Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–æ–≤)
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –ª—é–±—ã–º–∏ —Ö–æ—Å—Ç–∏–Ω–≥–∞–º–∏, –≤–∫–ª—é—á–∞—è Render
- ‚úÖ –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ, —á–µ–º SMTP
- ‚úÖ –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –ø–æ—Ä—Ç–æ–≤

## –ó–∞–ø—É—Å–∫

```bash
# Development mode (—Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–æ–π)
npm run dev

# Production mode
npm start
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:3001`

## CORS

–ë–µ–∫–µ–Ω–¥ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –ø—Ä–∏–µ–º–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å–æ —Å–ª–µ–¥—É—é—â–∏—Ö –¥–æ–º–µ–Ω–æ–≤:
- `http://localhost:5173` (Vite dev server)
- `http://localhost:4173` (Vite preview server)
- `http://localhost:3000` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π dev –ø–æ—Ä—Ç)
- `https://proffloud.ru`
- `http://proffloud.ru`

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –¥–æ–º–µ–Ω—ã, –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `allowedOrigins` –≤ `server.js`.

## –î–µ–ø–ª–æ–π –Ω–∞ Render

1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Web Service –Ω–∞ Render –∏ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –±–µ–∫–µ–Ω–¥–æ–º
2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Å–µ—Ä–≤–∏—Å–∞ —É–∫–∞–∂–∏—Ç–µ:
   - **Build Command**: `npm install`
   - **Start Command**: `npm start`
3. –í —Ä–∞–∑–¥–µ–ª–µ Environment Variables –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - `GMAIL_CLIENT_ID` - Client ID –∏–∑ Google Cloud Console
   - `GMAIL_CLIENT_SECRET` - Client Secret –∏–∑ Google Cloud Console
   - `GMAIL_REFRESH_TOKEN` - Refresh Token (–ø–æ–ª—É—á–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑, —Å–º. GMAIL_API_SETUP.md)
   - `GMAIL_USER` - –≤–∞—à Gmail –∞–¥—Ä–µ—Å
   - `RECIPIENT_EMAIL` - email –∞–¥—Ä–µ—Å, –∫—É–¥–∞ –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞—è–≤–∫–∏
4. –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –±–µ–∫–µ–Ω–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://proffloud-backend.onrender.com`)
5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç URL –≤ `.env.production` —Ñ–∞–π–ª–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–ø—Ä–∞–≤–∫–æ–π email:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ OAuth2 credentials**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `GMAIL_CLIENT_ID` –∏ `GMAIL_CLIENT_SECRET` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Refresh Token**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `GMAIL_REFRESH_TOKEN` –≤–∞–ª–∏–¥–Ω—ã–π (–µ—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π, —Å–º. GMAIL_API_SETUP.md)
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Gmail User**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `GMAIL_USER` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–∫–∫–∞—É–Ω—Ç—É, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è refresh token
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã Gmail API**: –õ–∏—á–Ω—ã–π Gmail –∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç –ª–∏–º–∏—Ç 500 email/–¥–µ–Ω—å (–æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ)
5. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏**: –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –±—É–¥—É—Ç –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

üìñ **–°—Ç–∞—Ä–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ SMTP**: –°–º. [SMTP_RUSSIA.md](./SMTP_RUSSIA.md) (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ SMTP)

## API Endpoints

### POST /api/submit-form

–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫—É —Å —Å–∞–π—Ç–∞ –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π email.

**Request Body:**
```json
{
  "name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "email": "ivan@example.com"
}
```

**Response (Success):**
```json
{
  "success": true,
  "message": "–§–æ—Ä–º–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞!"
}
```

**Response (Error):**
```json
{
  "success": false,
  "error": "–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Ñ–æ—Ä–º—ã. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑."
}
```

### GET /health

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞.

